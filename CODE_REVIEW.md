# Elliott Wave 주가 예측 프로젝트 코드 리뷰

## 1. 프로젝트 개요
이 프로젝트는 Streamlit을 기반으로 한 웹 애플리케이션으로, Yahoo Finance 데이터를 활용하여 주식의 파동 패턴을 분석하고 향후 주가를 예측하는 시스템입니다. Elliott Wave 이론의 기본 개념(스윙 포인트, 피보나치 되돌림/확장)을 적용하여 기술적 분석을 수행합니다.

## 2. 코드 구조 분석
프로젝트는 기능별로 모듈화가 잘 되어 있어 유지보수성이 좋습니다.

*   **`app.py`**: 사용자 인터페이스(UI) 및 시각화 담당. Streamlit과 Plotly를 효과적으로 활용했습니다.
*   **`stock_data.py`**: 데이터 수집 담당. `yfinance` 라이브러리의 불안정성을 보완하기 위한 재시도 로직과 예외 처리가 잘 구현되어 있습니다.
*   **`elliott_wave.py`**: 핵심 분석 로직. 고점/저점(Peak/Trough) 식별 및 피보나치 레벨 계산을 수행합니다.
*   **`predictor.py`**: 예측 로직. 파동 분석 결과와 보조 지표(모멘텀, 추세 강도, 변동성)를 결합하여 최종 예측가를 산출합니다.

## 3. 주요 기능 및 로직 리뷰

### 3.1. Elliott Wave 분석 (`elliott_wave.py`)
*   **고점/저점 탐지**: `scipy.signal.argrelextrema`를 사용하여 국소적인 고점과 저점을 찾습니다. `order=5`로 설정되어 있는데, 이는 좌우 5개 캔들(총 11일) 내에서의 극값을 의미합니다.
    *   *장점*: 구현이 간단하고 명확합니다.
    *   *단점*: 시장의 변동성에 따라 `order` 값이 너무 작으면 노이즈가 많고, 너무 크면 중요한 파동을 놓칠 수 있습니다. 동적으로 조절하거나 여러 스케일을 분석하는 것이 좋습니다.
*   **파동 식별**: 현재 구현은 엄밀한 의미의 "Elliott Wave 카운팅(1-2-3-4-5, A-B-C)"보다는 **스윙 포인트(Swing Point) 분석**에 가깝습니다.
    *   *개선점*: "3파는 가장 짧을 수 없다", "4파는 1파와 겹치지 않는다" 등의 Elliott Wave 절대 불가침 법칙이 주석에는 언급되어 있으나, 실제 코드 로직(`detect_impulse_wave`)에서는 단순히 5개의 스윙 포인트 존재 여부만 확인하고 있어 엄격한 검증이 부족합니다.

### 3.2. 예측 알고리즘 (`predictor.py`)
*   **하이브리드 접근**: 파동 분석뿐만 아니라 모멘텀, 이동평균선 배열(추세 강도), 변동성을 함께 고려하여 예측의 신뢰도를 높이려는 시도는 훌륭합니다.
*   **목표가 산출**: 피보나치 확장(Extension) 비율을 사용하여 목표가를 산출하는 방식은 기술적 분석의 정석을 따르고 있습니다.
*   **신뢰 구간**: 변동성(Volatility)과 시간(Time)을 고려하여 예측의 불확실성 범위(상한/하한가)를 제공하는 점이 매우 좋습니다.

### 3.3. 데이터 처리 (`stock_data.py`)
*   **안정성**: `yfinance`가 가끔 데이터를 주지 않거나 형식이 바뀌는 문제에 대비해 `download`와 `Ticker.history` 두 가지 방식을 모두 시도하고, 재시도(Retry) 로직을 넣은 점은 매우 견고(Robust)한 구현입니다.
*   **유효성 검사**: 티커가 유효한지 미리 검사하여 사용자 경험을 개선했습니다.

## 4. 개선점 및 제안

### 4.1. 파동 분석 고도화
현재 로직은 단순히 고점/저점을 잇는 수준입니다. 진정한 Elliott Wave 분석을 위해서는 다음 기능이 추가되면 좋습니다:
*   **파동 카운팅 알고리즘**: 현재 진행 중인 파동이 충격파(Impulse) 중 몇 번 파동인지(예: 3파 진행 중) 식별하는 로직.
*   **규칙 검증 강화**: 2파가 1파의 저점을 훼손하지 않았는지, 3파가 가장 짧지 않은지 등을 코드로 검증하여 유효한 파동만 필터링.

### 4.2. 예측 로직의 정교화
*   **파동 단계별 예측**: 현재는 추세가 상승이면 무조건 상승 목표가를 제시합니다. 하지만 만약 현재가 '상승 5파'의 끝자락이라면, 다음은 '하락 A파'가 올 차례이므로 하락을 예측해야 합니다. 현재 파동의 위치에 따른 시나리오별 예측이 필요합니다.

### 4.3. UI/UX 개선
*   **차트 기능**: Plotly 차트에 사용자가 직접 파동을 그려보거나 수정할 수 있는 기능이 있다면 교육용으로 더 좋을 것입니다.
*   **백테스팅**: 과거 특정 시점으로 돌아가서 예측이 얼마나 맞았는지 검증하는 백테스팅 모드가 있다면 신뢰도를 입증하는 데 도움이 될 것입니다.

## 5. 총평
이 프로젝트는 주가 예측 시스템의 기본 골격을 아주 잘 갖추고 있습니다. 데이터 수집부터 분석, 예측, 시각화까지의 파이프라인이 깔끔하게 연결되어 있습니다. 특히 코드의 가독성이 높고 모듈화가 잘 되어 있어, 향후 더 복잡한 알고리즘을 탑재하기 위한 훌륭한 베이스라인이 됩니다.

현재 단계에서는 "Elliott Wave 이론을 완벽히 구현했다"기보다는 **"스윙 포인트와 피보나치를 활용한 추세 추종 시스템"**에 가깝습니다. 이를 발전시켜 실제 파동 카운팅 로직을 추가한다면 매우 강력한 도구가 될 것입니다.
